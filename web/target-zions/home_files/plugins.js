/*!
// Chosen, a Select Box Enhancer for jQuery and Prototype
// by Patrick Filler for Harvest, http://getharvest.com
//
// Version 1.0.0
// Full source at https://github.com/harvesthq/chosen
// Copyright (c) 2011 Harvest http://getharvest.com

// MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
// This file is generated by `grunt build`, do not edit it by hand.
*/
(function(){var f,a,g,d,e,b={}.hasOwnProperty,c=function(k,i){for(var h in i){if(b.call(i,h)){k[h]=i[h]}}function j(){this.constructor=k}j.prototype=i.prototype;k.prototype=new j();k.__super__=i.prototype;return k};d=(function(){function h(){this.options_index=0;this.parsed=[]}h.prototype.add_node=function(i){if(i.nodeName.toUpperCase()==="OPTGROUP"){return this.add_group(i)}else{return this.add_option(i)}};h.prototype.add_group=function(o){var n,k,m,j,l,i;n=this.parsed.length;this.parsed.push({array_index:n,group:true,label:this.escapeExpression(o.label),children:0,disabled:o.disabled});l=o.childNodes;i=[];for(m=0,j=l.length;m<j;m++){k=l[m];i.push(this.add_option(k,n,o.disabled))}return i};h.prototype.add_option=function(j,k,i){if(j.nodeName.toUpperCase()==="OPTION"){if(j.text!==""){if(k!=null){this.parsed[k].children+=1}this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:j.value,text:j.text,html:j.innerHTML,selected:j.selected,disabled:i===true?i:j.disabled,group_array_index:k,classes:j.className,style:j.style.cssText})}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true})}return this.options_index+=1}};h.prototype.escapeExpression=function(k){var j,i;if((k==null)||k===false){return""}if(!/[\&\<\>\"\'\`]/.test(k)){return k}j={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};i=/&(?!\w+;)|[\<\>\"\'\`]/g;return k.replace(i,function(l){return j[l]||"&amp;"})};return h})();d.select_to_array=function(h){var m,l,k,i,j;l=new d();j=h.childNodes;for(k=0,i=j.length;k<i;k++){m=j[k];l.add_node(m)}return l.parsed};a=(function(){function h(i,j){this.form_field=i;this.options=j!=null?j:{};if(!h.browser_is_supported()){return}this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers()}h.prototype.set_default_values=function(){var i=this;this.click_test_action=function(j){return i.test_active_click(j)};this.activate_action=function(j){return i.activate_field(j)};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true};h.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder")}else{if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||h.default_multiple_text}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||h.default_single_text}}return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||h.default_no_result_text};h.prototype.mouse_enter=function(){return this.mouse_on_container=true};h.prototype.mouse_leave=function(){return this.mouse_on_container=false};h.prototype.input_focus=function(i){var j=this;if(this.is_multiple){if(!this.active_field){return setTimeout((function(){return j.container_mousedown()}),50)}}else{if(!this.active_field){return this.activate_field()}}};h.prototype.input_blur=function(i){var j=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return j.blur_test()}),100)}};h.prototype.results_option_build=function(j){var k,n,m,i,l;k="";l=this.results_data;for(m=0,i=l.length;m<i;m++){n=l[m];if(n.group){k+=this.result_add_group(n)}else{k+=this.result_add_option(n)}if(j!=null?j.first:void 0){if(n.selected&&this.is_multiple){this.choice_build(n)}else{if(n.selected&&!this.is_multiple){this.single_set_selected_text(n.text)}}}}return k};h.prototype.result_add_option=function(k){var i,j;if(!k.search_match){return""}if(!this.include_option_in_results(k)){return""}i=[];if(!k.disabled&&!(k.selected&&this.is_multiple)){i.push("active-result")}if(k.disabled&&!(k.selected&&this.is_multiple)){i.push("disabled-result")}if(k.selected){i.push("result-selected")}if(k.group_array_index!=null){i.push("group-option")}if(k.classes!==""){i.push(k.classes)}j=k.style.cssText!==""?' style="'+k.style+'"':"";return'<li class="'+(i.join(" "))+'"'+j+' data-option-array-index="'+k.array_index+'">'+k.search_text+"</li>"};h.prototype.result_add_group=function(i){if(!(i.search_match||i.group_match)){return""}if(!(i.active_options>0)){return""}return'<li class="group-result">'+i.search_text+"</li>"};h.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple){this.results_reset_cleanup()}this.result_clear_highlight();this.result_single_selected=null;this.results_build();if(this.results_showing){return this.winnow_results()}};h.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide()}else{return this.results_show()}};h.prototype.results_search=function(i){if(this.results_showing){return this.winnow_results()}else{return this.results_show()}};h.prototype.winnow_results=function(){var u,n,q,r,m,i,t,o,s,j,k,p,l;this.no_results_clear();m=0;t=this.get_search_text();u=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");r=this.search_contains?"":"^";q=new RegExp(r+u,"i");j=new RegExp(u,"i");l=this.results_data;for(k=0,p=l.length;k<p;k++){n=l[k];n.search_match=false;i=null;if(this.include_option_in_results(n)){if(n.group){n.group_match=false;n.active_options=0}if((n.group_array_index!=null)&&this.results_data[n.group_array_index]){i=this.results_data[n.group_array_index];if(i.active_options===0&&i.search_match){m+=1}i.active_options+=1}if(!(n.group&&!this.group_search)){n.search_text=n.group?n.label:n.html;n.search_match=this.search_string_match(n.search_text,q);if(n.search_match&&!n.group){m+=1}if(n.search_match){if(t.length){o=n.search_text.search(j);s=n.search_text.substr(0,o+t.length)+"</em>"+n.search_text.substr(o+t.length);n.search_text=s.substr(0,o)+"<em>"+s.substr(o)}if(i!=null){i.group_match=true}}else{if((n.group_array_index!=null)&&this.results_data[n.group_array_index].search_match){n.search_match=true}}}}}this.result_clear_highlight();if(m<1&&t.length){this.update_results_content("");return this.no_results(t)}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight()}};h.prototype.search_string_match=function(n,k){var j,m,l,i;if(k.test(n)){return true}else{if(this.enable_split_word_search&&(n.indexOf(" ")>=0||n.indexOf("[")===0)){m=n.replace(/\[|\]/g,"").split(" ");if(m.length){for(l=0,i=m.length;l<i;l++){j=m[l];if(k.test(j)){return true}}}}}};h.prototype.choices_count=function(){var j,l,i,k;if(this.selected_option_count!=null){return this.selected_option_count}this.selected_option_count=0;k=this.form_field.options;for(l=0,i=k.length;l<i;l++){j=k[l];if(j.selected){this.selected_option_count+=1}}return this.selected_option_count};h.prototype.choices_click=function(i){i.preventDefault();if(!(this.results_showing||this.is_disabled)){return this.results_show()}};h.prototype.keyup_checker=function(i){var k,j;k=(j=i.which)!=null?j:i.keyCode;this.search_field_scale();switch(k){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke()}else{if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}}break;case 13:i.preventDefault();if(this.results_showing){return this.result_select(i)}break;case 27:if(this.results_showing){this.results_hide()}return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};h.prototype.container_width=function(){if(this.options.width!=null){return this.options.width}else{return""+this.form_field.offsetWidth+"px"}};h.prototype.include_option_in_results=function(i){if(this.is_multiple&&(!this.display_selected_options&&i.selected)){return false}if(!this.display_disabled_options&&i.disabled){return false}if(i.empty){return false}return true};h.browser_is_supported=function(){if(window.navigator.appName==="Microsoft Internet Explorer"){return document.documentMode>=8}if(/iP(od|hone)/i.test(window.navigator.userAgent)){return false}if(/Android/i.test(window.navigator.userAgent)){if(/Mobile/i.test(window.navigator.userAgent)){return false}}return true};h.default_multiple_text="Select Some Options";h.default_single_text="Select an Option";h.default_no_result_text="No results match";return h})();f=jQuery;f.fn.extend({chosen:function(h){if(!a.browser_is_supported()){return this}return this.each(function(j){var k,i;k=f(this);i=k.data("chosen");if(h==="destroy"&&i){i.destroy()}else{if(!i){k.data("chosen",new g(this,h))}}})}});g=(function(h){c(i,h);function i(){e=i.__super__.constructor.apply(this,arguments);return e}i.prototype.setup=function(){this.form_field_jq=f(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")};i.prototype.set_up_html=function(){var j,k;j=["chosen-container"];j.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className){j.push(this.form_field.className)}if(this.is_rtl){j.push("chosen-rtl")}k={"class":j.join(" "),style:"width: "+(this.container_width())+";",title:this.form_field.title};if(this.form_field.id.length){k.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"}this.container=f("<div />",k);if(this.is_multiple){this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>')}else{this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>')}this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find("div.chosen-drop").first();this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chosen-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chosen-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chosen-search").first();this.selected_item=this.container.find(".chosen-single").first()}this.results_build();this.set_tab_index();this.set_label_behavior();return this.form_field_jq.trigger("chosen:ready",{chosen:this})};i.prototype.register_observers=function(){var j=this;this.container.bind("mousedown.chosen",function(k){j.container_mousedown(k)});this.container.bind("mouseup.chosen",function(k){j.container_mouseup(k)});this.container.bind("mouseenter.chosen",function(k){j.mouse_enter(k)});this.container.bind("mouseleave.chosen",function(k){j.mouse_leave(k)});this.search_results.bind("mouseup.chosen",function(k){j.search_results_mouseup(k)});this.search_results.bind("mouseover.chosen",function(k){j.search_results_mouseover(k)});this.search_results.bind("mouseout.chosen",function(k){j.search_results_mouseout(k)});this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(k){j.search_results_mousewheel(k)});this.form_field_jq.bind("chosen:updated.chosen",function(k){j.results_update_field(k)});this.form_field_jq.bind("chosen:activate.chosen",function(k){j.activate_field(k)});this.form_field_jq.bind("chosen:open.chosen",function(k){j.container_mousedown(k)});this.search_field.bind("blur.chosen",function(k){j.input_blur(k)});this.search_field.bind("keyup.chosen",function(k){j.keyup_checker(k)});this.search_field.bind("keydown.chosen",function(k){j.keydown_checker(k)});this.search_field.bind("focus.chosen",function(k){j.input_focus(k)});if(this.is_multiple){return this.search_choices.bind("click.chosen",function(k){j.choices_click(k)})}else{return this.container.bind("click.chosen",function(k){k.preventDefault()})}};i.prototype.destroy=function(){f(document).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex){this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex}this.container.remove();this.form_field_jq.removeData("chosen");return this.form_field_jq.show()};i.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass("chosen-disabled");this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus.chosen",this.activate_action)}return this.close_field()}else{this.container.removeClass("chosen-disabled");this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus.chosen",this.activate_action)}}};i.prototype.container_mousedown=function(j){if(!this.is_disabled){if(j&&j.type==="mousedown"&&!this.results_showing){j.preventDefault()}if(!((j!=null)&&(f(j.target)).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple){this.search_field.val("")}f(document).bind("click.chosen",this.click_test_action);this.results_show()}else{if(!this.is_multiple&&j&&((f(j.target)[0]===this.selected_item[0])||f(j.target).parents("a.chosen-single").length)){j.preventDefault();this.results_toggle()}}return this.activate_field()}}};i.prototype.container_mouseup=function(j){if(j.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(j)}};i.prototype.search_results_mousewheel=function(k){var m,j,l;m=-((j=k.originalEvent)!=null?j.wheelDelta:void 0)||((l=k.originialEvent)!=null?l.detail:void 0);if(m!=null){k.preventDefault();if(k.type==="DOMMouseScroll"){m=m*40}return this.search_results.scrollTop(m+this.search_results.scrollTop())}};i.prototype.blur_test=function(j){if(!this.active_field&&this.container.hasClass("chosen-container-active")){return this.close_field()}};i.prototype.close_field=function(){f(document).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};i.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus()};i.prototype.test_active_click=function(j){if(this.container.is(f(j.target).closest(".chosen-container"))){return this.active_field=true}else{return this.close_field()}};i.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=d.select_to_array(this.form_field);if(this.is_multiple){this.search_choices.find("li.search-choice").remove()}else{if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch")}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch")}}}this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false};i.prototype.result_do_highlight=function(k){var o,n,l,m,j;if(k.length){this.result_clear_highlight();this.result_highlight=k;this.result_highlight.addClass("highlighted");l=parseInt(this.search_results.css("maxHeight"),10);j=this.search_results.scrollTop();m=l+j;n=this.result_highlight.position().top+this.search_results.scrollTop();o=n+this.result_highlight.outerHeight();if(o>=m){return this.search_results.scrollTop((o-l)>0?o-l:0)}else{if(n<j){return this.search_results.scrollTop(n)}}}};i.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted")}return this.result_highlight=null};i.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}this.container.addClass("chosen-with-drop");this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};i.prototype.update_results_content=function(j){return this.search_results.html(j)};i.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})}return this.results_showing=false};i.prototype.set_tab_index=function(k){var j;if(this.form_field.tabIndex){j=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=j}};i.prototype.set_label_behavior=function(){var j=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length){this.form_field_label=f("label[for='"+this.form_field.id+"']")}if(this.form_field_label.length>0){return this.form_field_label.bind("click.chosen",function(k){if(j.is_multiple){return j.container_mousedown(k)}else{return j.activate_field()}})}};i.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}else{this.search_field.val("");return this.search_field.removeClass("default")}};i.prototype.search_results_mouseup=function(j){var k;k=f(j.target).hasClass("active-result")?f(j.target):f(j.target).parents(".active-result").first();if(k.length){this.result_highlight=k;this.result_select(j);return this.search_field.focus()}};i.prototype.search_results_mouseover=function(j){var k;k=f(j.target).hasClass("active-result")?f(j.target):f(j.target).parents(".active-result").first();if(k){return this.result_do_highlight(k)}};i.prototype.search_results_mouseout=function(j){if(f(j.target).hasClass("active-result"||f(j.target).parents(".active-result").first())){return this.result_clear_highlight()}};i.prototype.choice_build=function(k){var j,l,m=this;j=f("<li />",{"class":"search-choice"}).html("<span>"+k.html+"</span>");if(k.disabled){j.addClass("search-choice-disabled")}else{l=f("<a />",{"class":"search-choice-close","data-option-array-index":k.array_index});l.bind("click.chosen",function(n){return m.choice_destroy_link_click(n)});j.append(l)}return this.search_container.before(j)};i.prototype.choice_destroy_link_click=function(j){j.preventDefault();j.stopPropagation();if(!this.is_disabled){return this.choice_destroy(f(j.target))}};i.prototype.choice_destroy=function(j){if(this.result_deselect(j[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){this.results_hide()}j.parents("li").first().remove();return this.search_field_scale()}};i.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_option_count=null;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide()}};i.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove()};i.prototype.result_select=function(k){var m,l,j;if(this.result_highlight){m=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}if(this.is_multiple){m.removeClass("active-result")}else{if(this.result_single_selected){this.result_single_selected.removeClass("result-selected");j=this.result_single_selected[0].getAttribute("data-option-array-index");this.results_data[j].selected=false}this.result_single_selected=m}m.addClass("result-selected");l=this.results_data[m[0].getAttribute("data-option-array-index")];l.selected=true;this.form_field.options[l.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple){this.choice_build(l)}else{this.single_set_selected_text(l.text)}if(!((k.metaKey||k.ctrlKey)&&this.is_multiple)){this.results_hide()}this.search_field.val("");if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{selected:this.form_field.options[l.options_index].value})}this.current_selectedIndex=this.form_field.selectedIndex;return this.search_field_scale()}};i.prototype.single_set_selected_text=function(j){if(j==null){j=this.default_text}if(j===this.default_text){this.selected_item.addClass("chosen-default")}else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default")}return this.selected_item.find("span").text(j)};i.prototype.result_deselect=function(k){var j;j=this.results_data[k];if(!this.form_field.options[j.options_index].disabled){j.selected=false;this.form_field.options[j.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing){this.winnow_results()}this.form_field_jq.trigger("change",{deselected:this.form_field.options[j.options_index].value});this.search_field_scale();return true}else{return false}};i.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect){return}if(!this.selected_item.find("abbr").length){this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')}return this.selected_item.addClass("chosen-single-with-deselect")};i.prototype.get_search_text=function(){if(this.search_field.val()===this.default_text){return""}else{return f("<div/>").text(f.trim(this.search_field.val())).html()}};i.prototype.winnow_results_set_highlight=function(){var j,k;k=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];j=k.length?k.first():this.search_results.find(".active-result").first();if(j!=null){return this.result_do_highlight(j)}};i.prototype.no_results=function(j){var k;k=f('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');k.find("span").first().html(j);return this.search_results.append(k)};i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};i.prototype.keydown_arrow=function(){var j;if(this.results_showing&&this.result_highlight){j=this.result_highlight.nextAll("li.active-result").first();if(j){return this.result_do_highlight(j)}}else{return this.results_show()}};i.prototype.keyup_arrow=function(){var j;if(!this.results_showing&&!this.is_multiple){return this.results_show()}else{if(this.result_highlight){j=this.result_highlight.prevAll("li.active-result");if(j.length){return this.result_do_highlight(j.first())}else{if(this.choices_count()>0){this.results_hide()}return this.result_clear_highlight()}}}};i.prototype.keydown_backstroke=function(){var j;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}else{j=this.search_container.siblings("li.search-choice").last();if(j.length&&!j.hasClass("search-choice-disabled")){this.pending_backstroke=j;if(this.single_backstroke_delete){return this.keydown_backstroke()}else{return this.pending_backstroke.addClass("search-choice-focus")}}}};i.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus")}return this.pending_backstroke=null};i.prototype.keydown_checker=function(k){var l,j;l=(j=k.which)!=null?j:k.keyCode;this.search_field_scale();if(l!==8&&this.pending_backstroke){this.clear_backstroke()}switch(l){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(k)}this.mouse_on_container=false;break;case 13:k.preventDefault();break;case 38:k.preventDefault();this.keyup_arrow();break;case 40:k.preventDefault();this.keydown_arrow();break}};i.prototype.search_field_scale=function(){var j,n,m,k,q,r,p,l,o;if(this.is_multiple){m=0;p=0;q="position:absolute; left: -1000px; top: -1000px; display:none;";r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(l=0,o=r.length;l<o;l++){k=r[l];q+=k+":"+this.search_field.css(k)+";"}j=f("<div />",{style:q});j.text(this.search_field.val());f("body").append(j);p=j.width()+25;j.remove();n=this.container.outerWidth();if(p>n-10){p=n-10}return this.search_field.css({width:p+"px"})}};return i})(a)}).call(this);
/*!
 * jQuery EasIng v1.1.2 - http://gsgd.co.uk/sandbox/jquery.easIng.php
 *
 * Uses the built In easIng capabilities added In jQuery 1.1
 * to offer multiple easIng options
 *
 * Copyright (c) 2007 George Smith
 * Licensed under the MIT License:
 *   http://www.opensource.org/licenses/mit-license.php
 */
;jQuery.extend(jQuery.easing,{easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k/2)==2){return e+l}if(!j){j=k*(0.3*1.5)}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});
/*! 
* hoverIntent r5 // 2007.03.27 // jQuery 1.1.2+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* hoverIntent is currently available for use in all personal or commercial 
* projects under both MIT and GPL licenses. This means that you can choose 
* the license that best suits your project, and use it accordingly.
*/
(function(a){a.fn.hoverIntent=function(k,j){var l={sensitivity:7,interval:100,timeout:0};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(q){var o=(q.type=="mouseover"?q.fromElement:q.toElement)||q.relatedTarget;while(o&&o!=this){try{o=o.parentNode}catch(q){o=this}}if(o==this){return false}var g=jQuery.extend({},q);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(q.type=="mouseover"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.mouseover(b).mouseout(b)}})(jQuery);
/*!
 * jLinq - 3.0.1
 * Hugo Bonacci - hugoware.com
 * http://creativecommons.org/licenses/by/3.0/
 */
;var jLinq;var jlinq;var jl;(function(){var a={command:{query:0,select:1,action:2},exp:{get_path:/\./g,escape_regex:/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g},type:{nothing:-1,undefined:0,string:1,number:2,array:3,regex:4,bool:5,method:6,datetime:7,object:99},library:{commands:{},types:{},addType:function(b,c){a.library.types[b]=c},extend:function(b){if(!a.util.isType(a.type.array,b)){b=[b]}a.util.each(b,function(c){a.library.commands[c.name]=c})},query:function(d,c){if(!a.util.isType(a.type.array,d)){throw"jLinq can only query arrays of objects."}d=c.clone||(c.clone==null&&jLinq.alwaysClone)?a.util.clone(d):d;var b={instance:{ignoreCase:jLinq.ignoreCase,not:false,lastCommand:null,lastField:null,records:d,removed:[],or:function(){b.startNewCommandSet()},query:{}},canRepeatCommand:function(e){return b.instance.lastCommand!=null&&e.length==(b.instance.lastCommand.method.length+1)&&a.util.isType(a.type.string,e[0])},commands:[[]],execute:function(){var e=[];var f=b.instance;a.util.each(b.instance.records,function(g){f.record=g;if(b.evaluate(f)){e.push(g)}else{b.instance.removed.push(g)}});b.instance.records=e},findValue:a.util.findValue,evaluate:function(f){for(var g=0,e=b.commands.length;g<e;g++){var h=b.commands[g];if(b.evaluateSet(h,f)){return true}}return false},evaluateSet:function(k,h){for(var g in k){if(!k.hasOwnProperty(g)){continue}var j=k[g];h.value=b.findValue(h.record,j.path);h.compare=function(e){return a.util.compare(h.value,e,h)};h.when=function(e){return a.util.when(h.value,e,h)};try{var f=j.method.apply(h,j.args);if(j.not){f=!f}if(!f){return false}}catch(i){return false}}return true},repeat:function(e){if(!b.instance.lastCommand||e==null){return}e=a.util.toArray(e);if(b.canRepeatCommand(e)){b.instance.lastField=e[0];e=a.util.select(e,null,1,null)}b.queue(b.instance.lastCommand,e)},queue:function(g,e){b.instance.lastCommand=g;var f={name:g.name,method:g.method,field:b.instance.lastField,count:g.method.length,args:e,not:b.not};if(f.args.length>g.method.length){f.field=f.args[0];f.args=a.util.remaining(f.args,1);b.instance.lastField=f.field}f.path=f.field;b.commands[b.commands.length-1].push(f);b.not=false},startNewCommandSet:function(){b.commands.push([])},setNot:function(){b.not=!b.not}};a.util.each(a.library.commands,function(g){if(g.type==a.command.query){var f=function(){b.queue(g,arguments);return b.instance.query};b.instance.query[g.name]=f;var e=a.util.operatorName(g.name);b.instance.query["or"+e]=function(){b.startNewCommandSet();return f.apply(null,arguments)};b.instance.query["orNot"+e]=function(){b.startNewCommandSet();b.setNot();return f.apply(null,arguments)};b.instance.query["and"+e]=function(){return f.apply(null,arguments)};b.instance.query["andNot"+e]=function(){b.setNot();return f.apply(null,arguments)};b.instance.query["not"+e]=function(){b.setNot();return f.apply(null,arguments)}}else{if(g.type==a.command.select){b.instance.query[g.name]=function(){b.execute();var h=b.instance;h.compare=function(j,i){return a.util.compare(j,i,h)};h.when=function(j,i){return a.util.when(j,i,h)};return g.method.apply(h,arguments)}}else{if(g.type==a.command.action){b.instance.query[g.name]=function(){var h=b.instance;h.compare=function(j,i){return a.util.compare(j,i,h)};h.when=function(j,i){return a.util.when(j,i,h)};g.method.apply(h,arguments);return b.instance.query}}}}});b.instance.query.or=function(){b.startNewCommandSet();b.repeat(arguments);return b.instance.query};b.instance.query.and=function(){b.repeat(arguments);return b.instance.query};b.instance.query.not=function(){b.setNot();b.repeat(arguments);return b.instance.query};b.instance.query.andNot=function(){b.setNot();b.repeat(arguments);return b.instance.query};b.instance.query.orNot=function(){b.startNewCommandSet();b.setNot();b.repeat(arguments);return b.instance.query};return b.instance.query}},util:{trim:function(b){b=b==null?"":b;b=b.toString();return b.replace(/^\s*|\s*$/g,"")},cloneArray:function(c){var b=[];a.util.each(c,function(d){b.push(a.util.clone(d))});return b},clone:function(c){if(a.util.isType(a.type.array,c)){return a.util.cloneArray(c)}else{if(a.util.isType(a.type.object,c)){var d={};for(var b in c){if(c.hasOwnProperty(b)){d[b]=a.util.clone(c[b])}}return d}else{return c}}},invoke:function(h,c){c=c.concat();var g=c[0];var i=a.util.findValue(h,g);c=a.util.select(c,null,1,null);g=g.replace(/\..*$/,"");var d=a.util.findValue(h,g);h=d===i?h:d;try{var b=i.apply(h,c);return b}catch(f){return null}},getPath:function(b){return a.util.toString(b).split(a.exp.get_path)},findValue:function(d,c){if(a.util.isType(a.type.array,c)){return a.util.invoke(d,c)}else{if(a.util.isType(a.type.string,c)){c=a.util.getPath(c);var b=0;while(d!=null&&b<c.length){d=d[c[b++]]}return d}else{return d}}},elementAt:function(c,b){return c&&c.length>0&&b<c.length&&b>=0?c[b]:null},regexEscape:function(b){return(b?b:"").toString().replace(a.exp.escape_regex,"\\$&")},regexMatch:function(d,c,b){if(a.util.isType(a.type.regex,d)){d=d.source}d=new RegExp(a.util.toString(d),b?"gi":"g");return a.util.toString(c).match(d)!=null},operatorName:function(b){return b.replace(/^\w/,function(c){return c.toUpperCase()})},compare:function(e,c,d){var b=a.util.when(e,c,d);return b==true?b:false},when:function(g,b,f){var d=a.util.getType(g);for(var e in b){if(!b.hasOwnProperty(e)){continue}var c=a.type[e];if(c==d){return b[e].apply(f,[g])}}if(b.other){return b.other.apply(f,[g])}return null},each:function(e,d){var b=0;for(var c in e){if(e.hasOwnProperty(c)){d(e[c],b++)}}},grab:function(d,c){var b=[];a.util.each(d,function(e){b.push(c(e))});return b},until:function(f,e){for(var d=0,c=f.length;d<c;d++){var b=e(f[d],d+1);if(b===true){return true}}return false},isType:function(b,c){return a.util.getType(c)==b},getType:function(c){if(c==null){return a.type.nothing}for(var b in a.library.types){if(a.library.types[b](c)){return b}}return a.type.object},remaining:function(d,b){var c=[];for(;b<d.length;b++){c.push(d[b])}return c},apply:function(d,c){for(var b in c){if(c.hasOwnProperty(b)){d[b]=c[b]}}return d},reorder:function(d,b,c){return a.util._performSort(d,b,c)},_performSort:function(f,g,j){var k=g.splice(0,1);if(k.length==0){return f}k=k[0];var c=a.util.isType(a.type.array,k);var b=(c?k[0]:k);var h=b.match(/^\-/);b=h?b.substr(1):b;if(h){if(c){k[0]=b}else{k=b}}var e=function(p,o){var n=a.util.findValue(p,k);var m=a.util.findValue(o,k);if(n==null&&m==null){n=0;m=0}else{if(n==null&&m!=null){n=0;m=1}else{if(n!=null&&m==null){n=1;m=0}else{if(j&&a.util.isType(a.type.string,n)&&a.util.isType(a.type.string,m)){n=n.toLowerCase();m=m.toLowerCase()}else{if(n.length&&m.length){n=n.length;m=m.length}}}}}var l=(n<m)?-1:(n>m)?1:0;return h?-l:l};f.sort(e);if(g.length>0){var i=[];var d=a.util.group(f,k,j);a.util.each(d,function(m){var n=g.slice();var l=a.util._performSort(m,n,j);i=i.concat(l)});f=i}return f},group:function(f,i,e){var b={};for(var h=0,d=f.length;h<d;h++){var c=f[h];var g=a.util.toString(a.util.findValue(c,i));g=e?g.toUpperCase():g;if(!b[g]){b[g]=[c]}else{b[g].push(c)}}return b},equals:function(d,c,b){return a.util.when(d,{string:function(){return a.util.regexMatch("^"+a.util.regexEscape(c)+"$",d,b)},other:function(){return(d==null&&c==null)||(d===c)}})},toArray:function(e){var b=[];if(e.length){for(var c=0;c<e.length;c++){b.push(e[c])}}else{for(var d in e){if(e.hasOwnProperty(d)){b.push(e[d])}}}return b},toString:function(b){return b==null?"":b.toString()},skipTake:function(e,d,c,b){c=c==null?0:c;b=b==null?e.length:b;if(c>=e.length||b==0){return[]}return a.util.select(e,d,c,c+b)},select:function(h,f,j,c){j=j==null?0:j;c=c==null?h.length:c;var e=h.slice(j,c);if(jLinq.util.isType(jLinq.type.object,f)){var g=f;f=function(l){var i={};for(var k in g){if(!g.hasOwnProperty(k)){continue}i[k]=l[k]?l[k]:g[k]}return i}}if(jLinq.util.isType(jLinq.type.method,f)){for(var d=0;d<e.length;d++){var b=e[d];e[d]=f.apply(b,[b])}}return e}}};a.library.addType(a.type.nothing,function(b){return b==null});a.library.addType(a.type.array,function(b){return b instanceof Array});a.library.addType(a.type.string,function(b){return b.substr&&b.toLowerCase});a.library.addType(a.type.number,function(b){return b.toFixed&&b.toExponential});a.library.addType(a.type.regex,function(b){return b instanceof RegExp});a.library.addType(a.type.bool,function(b){return b==true||b==false});a.library.addType(a.type.method,function(b){return b instanceof Function});a.library.addType(a.type.datetime,function(b){return b instanceof Date});a.library.extend([{name:"ignoreCase",type:a.command.action,method:function(){this.ignoreCase=true}},{name:"reverse",type:a.command.action,method:function(){this.records.reverse()}},{name:"useCase",type:a.command.action,method:function(){this.ignoreCase=false}},{name:"each",type:a.command.action,method:function(b){jLinq.util.each(this.records,function(c){b(c)})}},{name:"attach",type:a.command.action,method:function(c,b){this.when(b,{method:function(){jLinq.util.each(this.records,function(d){d[c]=b(d)})},other:function(){jLinq.util.each(this.records,function(d){d[c]=b})}})}},{name:"join",type:a.command.action,method:function(d,b,c,e){jLinq.util.each(this.records,function(f){f[b]=jLinq.from(d).equals(e,f[c]).select()})}},{name:"assign",type:a.command.action,method:function(d,b,c,e,f){jLinq.util.each(this.records,function(g){g[b]=jLinq.from(d).equals(e,g[c]).first(f)})}},{name:"sort",type:a.command.action,method:function(){var b=jLinq.util.toArray(arguments);this.records=jLinq.util.reorder(this.records,b,this.ignoreCase)}},{name:"equals",type:a.command.query,method:function(b){return jLinq.util.equals(this.value,b,this.ignoreCase)}},{name:"starts",type:a.command.query,method:function(b){return this.compare({array:function(){return jLinq.util.equals(this.value[0],b,this.ignoreCase)},other:function(){return jLinq.util.regexMatch(("^"+jLinq.util.regexEscape(b)),this.value,this.ignoreCase)}})}},{name:"ends",type:a.command.query,method:function(b){return this.compare({array:function(){return jLinq.util.equals(this.value[this.value.length-1],b,this.ignoreCase)},other:function(){return jLinq.util.regexMatch((jLinq.util.regexEscape(b)+"$"),this.value,this.ignoreCase)}})}},{name:"contains",type:a.command.query,method:function(b){return this.compare({array:function(){var c=this.ignoreCase;return jLinq.util.until(this.value,function(d){return jLinq.util.equals(d,b,c)})},other:function(){return jLinq.util.regexMatch(jLinq.util.regexEscape(b),this.value,this.ignoreCase)}})}},{name:"match",type:a.command.query,method:function(b){return this.compare({array:function(){var c=this.ignoreCase;return jLinq.util.until(this.value,function(d){return jLinq.util.regexMatch(b,d,c)})},other:function(){return jLinq.util.regexMatch(b,this.value,this.ignoreCase)}})}},{name:"type",type:a.command.query,method:function(b){return jLinq.util.isType(b,this.value)}},{name:"greater",type:a.command.query,method:function(b){return this.compare({array:function(){return this.value.length>b},string:function(){return this.value.length>b},other:function(){return this.value>b}})}},{name:"greaterEquals",type:a.command.query,method:function(b){return this.compare({array:function(){return this.value.length>=b},string:function(){return this.value.length>=b},other:function(){return this.value>=b}})}},{name:"less",type:a.command.query,method:function(b){return this.compare({array:function(){return this.value.length<b},string:function(){return this.value.length<b},other:function(){return this.value<b}})}},{name:"lessEquals",type:a.command.query,method:function(b){return this.compare({array:function(){return this.value.length<=b},string:function(){return this.value.length<=b},other:function(){return this.value<=b}})}},{name:"between",type:a.command.query,method:function(b,c){return this.compare({array:function(){return this.value.length>b&&this.value.length<c},string:function(){return this.value.length>b&&this.value.length<c},other:function(){return this.value>b&&this.value<c}})}},{name:"betweenEquals",type:a.command.query,method:function(b,c){return this.compare({array:function(){return this.value.length>=b&&this.value.length<=c},string:function(){return this.value.length>=b&&this.value.length<=c},other:function(){return this.value>=b&&this.value<=c}})}},{name:"empty",type:a.command.query,method:function(){return this.compare({array:function(){return this.value.length==0},string:function(){return jLinq.util.trim(this.value).length==0},other:function(){return this.value==null}})}},{name:"is",type:a.command.query,method:function(){return this.compare({bool:function(){return this.value===true},other:function(){return this.value!=null}})}},{name:"min",type:a.command.select,method:function(c){var b=jLinq.util.reorder(this.records,[c],this.ignoreCase);return jLinq.util.elementAt(b,0)}},{name:"max",type:a.command.select,method:function(c){var b=jLinq.util.reorder(this.records,[c],this.ignoreCase);return jLinq.util.elementAt(b,b.length-1)}},{name:"sum",type:a.command.select,method:function(c){var b;jLinq.util.each(this.records,function(d){var e=jLinq.util.findValue(d,c);b=b==null?e:(b+e)});return b}},{name:"average",type:a.command.select,method:function(c){var b;jLinq.util.each(this.records,function(d){var e=jLinq.util.findValue(d,c);b=b==null?e:(b+e)});return b/this.records.length}},{name:"skip",type:a.command.select,method:function(c,b){this.records=this.when(b,{method:function(){return jLinq.util.skipTake(this.records,b,c,null)},object:function(){return jLinq.util.skipTake(this.records,b,c,null)},other:function(){return jLinq.util.skipTake(this.records,null,c,null)}});return this.query}},{name:"take",type:a.command.select,method:function(b,c){return this.when(c,{method:function(){return jLinq.util.skipTake(this.records,c,null,b)},object:function(){return jLinq.util.skipTake(this.records,c,null,b)},other:function(){return jLinq.util.skipTake(this.records,null,null,b)}})}},{name:"skipTake",type:a.command.select,method:function(d,b,c){return this.when(c,{method:function(){return jLinq.util.skipTake(this.records,c,d,b)},object:function(){return jLinq.util.skipTake(this.records,c,d,b)},other:function(){return jLinq.util.skipTake(this.records,null,d,b)}})}},{name:"select",type:a.command.select,method:function(b){return this.when(b,{method:function(){return jLinq.util.select(this.records,b)},object:function(){return jLinq.util.select(this.records,b)},other:function(){return this.records}})}},{name:"distinct",type:a.command.select,method:function(c){var b=jLinq.util.group(this.records,c,this.ignoreCase);return jLinq.util.grab(b,function(d){return jLinq.util.findValue(d[0],c)})}},{name:"group",type:a.command.select,method:function(b){return jLinq.util.group(this.records,b,this.ignoreCase)}},{name:"define",type:a.command.select,method:function(c){var b=this.when(c,{method:function(){return jLinq.util.select(this.records,c)},object:function(){return jLinq.util.select(this.records,c)},other:function(){return this.records}});return jLinq.from(b)}},{name:"any",type:a.command.select,method:function(){return this.records.length>0}},{name:"none",type:a.command.select,method:function(){return this.records.length==0}},{name:"all",type:a.command.select,method:function(){return this.removed.length==0}},{name:"first",type:a.command.select,method:function(c){var b=jLinq.util.elementAt(this.records,0);return b==null?c:b}},{name:"last",type:a.command.select,method:function(c){var b=jLinq.util.elementAt(this.records,this.records.length-1);return b==null?c:b}},{name:"at",type:a.command.select,method:function(c,d){var b=jLinq.util.elementAt(this.records,c);return b==null?d:b}},{name:"count",type:a.command.select,method:function(){return this.records.length}},{name:"removed",type:a.command.select,method:function(b){return this.when(b,{method:function(){return jLinq.util.select(this.removed,b)},object:function(){return jLinq.util.select(this.removed,b)},other:function(){return this.removed}})}},{name:"where",type:a.command.select,method:function(e){var d=this;var c=[];jLinq.util.each(this.records,function(f){if(e.apply(d,[f])===true){c.push(f)}});var b=jLinq.from(c);if(!this.ignoreCase){b.useCase()}return b}}]);jLinq={alwaysClone:false,ignoreCase:true,command:a.command,type:a.type,extend:function(){a.library.extend.apply(null,arguments)},query:function(c,b){return library.framework.query(c,b)},from:function(b){return a.library.query(b,{clone:false})},getCommands:function(){return a.util.grab(a.library.commands,function(b){return{name:b.name,typeId:b.type,type:b.type==a.command.select?"select":b.type==a.command.query?"query":b.type==a.command.action?"action":"unknown"}})},util:{trim:a.util.trim,findValue:a.util.findValue,elementAt:a.util.elementAt,regexEscape:a.util.regexEscape,regexMatch:a.util.regexMatch,equals:a.util.equals,group:a.util.group,reorder:a.util.reorder,when:a.util.when,toArray:a.util.toArray,each:a.util.each,grab:a.util.grab,until:a.util.until,isType:a.util.isType,getType:a.util.getType,apply:a.util.apply,select:a.util.select,skipTake:a.util.skipTake}};jlinq=jLinq;jl=jLinq})();
/*!
 * jLinq - jQuery Extensions
 * Hugo Bonacci - hugoware.com
 * http://creativecommons.org/licenses/by/3.0/
 */
(function(){var a={query:function(b,f){var e=jlinq.util.isType(jlinq.type.string,b)?f.find(b):f;var c=a.toArray(e);var d=jlinq.from(c);d.$=f;return d},findTarget:function(b,c){if(b instanceof jQuery){return b}if(jlinq.util.isType(jlinq.type.string,b)){c=c.find(b)}return b},select:function(b,c){var d=$(c);return jlinq.util.isType(jlinq.type.string,b)?d.find(b):d},toArray:function(c){var b=[];c.each(function(e,d){b.push($(d))});return b}};jlinq.extend([{name:"$",type:jlinq.command.select,method:function(){return a.select(selector,this.records)}},{name:"get",type:jlinq.command.select,method:function(b){return a.select(b,this.records)}},{name:"include",type:jlinq.command.action,method:function(b,e){e=e||this.query.$;var d=e.find(b);var c=a.toArray(d);this.records=this.records.concat(c)}}]);$.fn.query=function(b){return a.query(b,this)};jLinq.$=function(b){return a.query(b,$(document.body))}})();
/*!
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
;jQuery.cookie=function(d,e,b){if(arguments.length>1&&String(e)!=="[object Object]"){b=jQuery.extend({},b);if(e===null||e===undefined){b.expires=-1}if(typeof b.expires==="number"){var g=b.expires,c=b.expires=new Date();c.setDate(c.getDate()+g)}e=String(e);return(document.cookie=[encodeURIComponent(d),"=",b.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join(""))}b=e||{};var a,f=b.raw?function(h){return h}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?f(a[1]):null};
/*!
 * jQuery.evenIfHidden - get layout information of hidden DOM elements
 * http://petr.illodavi.de/jquery-evenifhidden
 *
 * Copyright (c) 2010, Davide Petrillo
 * Licensed under the MIT license http://creativecommons.org/licenses/MIT/
 *
 * Version: 1.0
 * Date:    2010/04/22
 *
 **/
;jQuery.fn.evenIfHidden=function(a){return this.each(function(){var b=$(this);var c=[];var d=b.parents().andSelf().filter(":hidden");if(!d.length){a(b);return true}d.each(function(){var e=$(this).attr("style");e=typeof e=="undefined"?"":e;c.push(e);$(this).attr("style",e+" display: block !important;")});d.eq(0).css("left",-10000);a(b);d.each(function(){var e=c.shift();if(e){$(this).attr("style",e)}else{$(this).removeAttr("style")}})})};
/*! ------------------------------------------------------------------------
	Class: prettyPhoto
	Use: Lightbox clone for jQuery
	Author: Stephane Caron (http://www.no-margin-for-errors.com)
	Version: 3.1.2
	Customization: "allowscriptaccess" param value has been set to "sameDomain" in 'flash_markup' property 
------------------------------------------------------------------------- */
;$(document).ready(function(){$("a[rel^='prettyPhoto']").prettyPhoto();$("#custom_content a[rel^='prettyPhoto']:first").prettyPhoto({custom_markup:'<div id="map_canvas" style="width:260px; height:265px"></div>',changepicturecallback:function(){initialize()}});$("#custom_content a[rel^='prettyPhoto']:last").prettyPhoto({custom_markup:'<div id="bsap_1259344" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div><div id="bsap_1237859" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6" style="height:260px"></div><div id="bsap_1251710" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div>',changepicturecallback:function(){_bsap.exec()}})});(function(d){d.prettyPhoto={version:"3.1.2"};d.fn.prettyPhoto=function(f){f=jQuery.extend({animation_speed:"fast",slideshow:5000,autoplay_slideshow:false,opacity:0.8,show_title:false,allow_resize:true,default_width:500,default_height:344,counter_separator_label:" of ",theme:"facebook",horizontal_padding:0,hideflash:false,wmode:"opaque",autoplay:true,modal:false,deeplinking:false,overlay_gallery:false,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder"> 						<div class="ppt">&nbsp;</div> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<p class="pp_description"></p> 											{pp_social} 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<div> 									<ul> 										{gallery} 									</ul> 								</div> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="sameDomain" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="sameDomain" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:false},f);var m=this,l=false,s,q,r,t,w,x,h=d(window).height(),A=d(window).width(),i;doresize=true,scroll_pos=y();d(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){p();v()});if(f.keyboard_shortcuts){d(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(B){if(typeof $pp_pic_holder!="undefined"){if($pp_pic_holder.is(":visible")){switch(B.keyCode){case 37:d.prettyPhoto.changePage("previous");B.preventDefault();break;case 39:d.prettyPhoto.changePage("next");B.preventDefault();break;case 27:if(!settings.modal){d.prettyPhoto.close()}B.preventDefault();break}}}})}d.prettyPhoto.initialize=function(){settings=f;if(settings.theme=="pp_default"){settings.horizontal_padding=16}if(settings.ie6_fallback&&d.browser.msie&&parseInt(d.browser.version)==6){settings.theme="light_square"}theRel=d(this).attr("rel");galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(m,function(C,B){if(d(C).attr("rel").indexOf(theRel)!=-1){return d(C).attr("href")}}):d.makeArray(d(this).attr("href"));pp_titles=(isSet)?jQuery.map(m,function(C,B){if(d(C).attr("rel").indexOf(theRel)!=-1){return(d(C).find("img").attr("alt"))?d(C).find("img").attr("alt"):""}}):d.makeArray(d(this).find("img").attr("alt"));pp_descriptions=(isSet)?jQuery.map(m,function(C,B){if(d(C).attr("rel").indexOf(theRel)!=-1){return(d(C).attr("title"))?d(C).attr("title"):""}}):d.makeArray(d(this).attr("title"));set_position=jQuery.inArray(d(this).attr("href"),pp_images);rel_index=(isSet)?set_position:d("a[rel^='"+theRel+"']").index(d(this));g(this);if(settings.allow_resize){d(window).bind("scroll.prettyphoto",function(){p()})}d.prettyPhoto.open();return false};d.prettyPhoto.open=function(B){if(typeof settings=="undefined"){settings=f;if(d.browser.msie&&d.browser.version==6){settings.theme="light_square"}pp_images=d.makeArray(arguments[0]);pp_titles=(arguments[1])?d.makeArray(arguments[1]):d.makeArray("");pp_descriptions=(arguments[2])?d.makeArray(arguments[2]):d.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=0;g(B.target)}if(d.browser.msie&&d.browser.version==6){d("select").css("visibility","hidden")}if(settings.hideflash){d("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden")}k(d(pp_images).size());d(".pp_loaderIcon").show();if($ppt.is(":hidden")){$ppt.css("opacity",0).show()}$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find(".currentTextHolder").text((set_position+1)+settings.counter_separator_label+d(pp_images).size());if(pp_descriptions[set_position]!=""){$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position]))}else{$pp_pic_holder.find(".pp_description").hide()}movie_width=(parseFloat(a("width",pp_images[set_position])))?a("width",pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(a("height",pp_images[set_position])))?a("height",pp_images[set_position]):settings.default_height.toString();l=false;if(movie_height.indexOf("%")!=-1){movie_height=parseFloat((d(window).height()*parseFloat(movie_height)/100)-150);l=true}if(movie_width.indexOf("%")!=-1){movie_width=parseFloat((d(window).width()*parseFloat(movie_width)/100)-150);l=true}$pp_pic_holder.fadeIn(function(){(settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;");imgPreloader="";skipInjection=false;switch(z(pp_images[set_position])){case"image":imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position<d(pp_images).size()-1){nextImage.src=pp_images[set_position+1]}prevImage=new Image();if(isSet&&pp_images[set_position-1]){prevImage.src=pp_images[set_position-1]}$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);imgPreloader.onload=function(){s=o(imgPreloader.width,imgPreloader.height);j()};imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");d.prettyPhoto.close()};imgPreloader.src=pp_images[set_position];break;case"youtube":s=o(movie_width,movie_height);movie="http://www.youtube.com/embed/"+a("v",pp_images[set_position]);(a("rel",pp_images[set_position]))?movie+="?rel="+a("rel",pp_images[set_position]):movie+="?rel=1";if(settings.autoplay){movie+="&autoplay=1"}toInject=settings.iframe_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":s=o(movie_width,movie_height);movie_id=pp_images[set_position];var D=/http:\/\/(www\.)?vimeo.com\/(\d+)/;var C=movie_id.match(D);movie="http://player.vimeo.com/video/"+C[2]+"?title=0&amp;byline=0&amp;portrait=0";if(settings.autoplay){movie+="&autoplay=1;"}vimeo_width=s.width+"/embed/?moog_width="+s.width;toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,s.height).replace(/{path}/g,movie);break;case"quicktime":s=o(movie_width,movie_height);s.height+=15;s.contentHeight+=15;s.containerHeight+=15;toInject=settings.quicktime_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":s=o(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));toInject=settings.flash_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":s=o(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=false;s=o(movie_width,movie_height);doresize=true;skipInjection=true;d.get(pp_images[set_position],function(E){toInject=settings.inline_markup.replace(/{content}/g,E);$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;j()});break;case"custom":s=o(movie_width,movie_height);toInject=settings.custom_markup;break;case"inline":myClone=d(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(d("body")).show();doresize=false;s=o(d(myClone).width(),d(myClone).height());doresize=true;d(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,d(pp_images[set_position]).html());break}if(!imgPreloader&&!skipInjection){$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;j()}});return false};d.prettyPhoto.changePage=function(B){currentGalleryPage=0;if(B=="previous"){set_position--;if(set_position<0){set_position=d(pp_images).size()-1}}else{if(B=="next"){set_position++;if(set_position>d(pp_images).size()-1){set_position=0}}else{set_position=B}}rel_index=set_position;if(!doresize){doresize=true}d(".pp_contract").removeClass("pp_contract").addClass("pp_expand");n(function(){d.prettyPhoto.open()})};d.prettyPhoto.changeGalleryPage=function(B){if(B=="next"){currentGalleryPage++;if(currentGalleryPage>totalPage){currentGalleryPage=0}}else{if(B=="previous"){currentGalleryPage--;if(currentGalleryPage<0){currentGalleryPage=totalPage}}else{currentGalleryPage=B}}slide_speed=(B=="next"||B=="previous")?settings.animation_speed:0;slide_to=currentGalleryPage*(itemsPerPage*itemWidth);$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)};d.prettyPhoto.startSlideshow=function(){if(typeof i=="undefined"){$pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){d.prettyPhoto.stopSlideshow();return false});i=setInterval(d.prettyPhoto.startSlideshow,settings.slideshow)}else{d.prettyPhoto.changePage("next")}};d.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){d.prettyPhoto.startSlideshow();return false});clearInterval(i);i=undefined};d.prettyPhoto.close=function(){if($pp_overlay.is(":animated")){return}d.prettyPhoto.stopSlideshow();$pp_pic_holder.stop().find("object,embed").css("visibility","hidden");d("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){d(this).remove()});$pp_overlay.fadeOut(settings.animation_speed,function(){if(d.browser.msie&&d.browser.version==6){d("select").css("visibility","visible")}if(settings.hideflash){d("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible")}d(this).remove();d(window).unbind("scroll.prettyphoto");settings.callback();doresize=true;q=false;delete settings})};function j(){d(".pp_loaderIcon").hide();projectedTop=scroll_pos.scrollTop+((h/2)-(s.containerHeight/2));if(projectedTop<0){projectedTop=0}$ppt.fadeTo(settings.animation_speed,1);$pp_pic_holder.find(".pp_content").animate({height:s.contentHeight,width:s.contentWidth},settings.animation_speed);$pp_pic_holder.animate({top:projectedTop,left:(A/2)-(s.containerWidth/2),width:s.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(s.height).width(s.width);$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);if(isSet&&z(pp_images[set_position])=="image"){$pp_pic_holder.find(".pp_hoverContainer").show()}else{$pp_pic_holder.find(".pp_hoverContainer").hide()}if(s.resized){d("a.pp_expand,a.pp_contract").show()}else{d("a.pp_expand").hide()}if(settings.autoplay_slideshow&&!i&&!q){d.prettyPhoto.startSlideshow()}if(settings.deeplinking){b()}settings.changepicturecallback();q=true});e()}function n(B){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){d(".pp_loaderIcon").show();B()})}function k(B){(B>1)?d(".pp_nav").show():d(".pp_nav").hide()}function o(C,B){resized=false;u(C,B);imageWidth=C,imageHeight=B;if(((x>A)||(w>h))&&doresize&&settings.allow_resize&&!l){resized=true,fitting=false;while(!fitting){if((x>A)){imageWidth=(A-200);imageHeight=(B/C)*imageWidth}else{if((w>h)){imageHeight=(h-200);imageWidth=(C/B)*imageHeight}else{fitting=true}}w=imageHeight,x=imageWidth}u(imageWidth,imageHeight);if((x>A)||(w>h)){o(x,w)}}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(w),containerWidth:Math.floor(x)+(settings.horizontal_padding*2),contentHeight:Math.floor(r),contentWidth:Math.floor(t),resized:resized}}function u(C,B){C=parseFloat(C);B=parseFloat(B);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(C);detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom"));$pp_details=$pp_details.clone().addClass(settings.theme).width(C).appendTo(d("body")).css({position:"absolute",top:-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;if(d.browser.msie&&d.browser.version==7){detailsHeight+=8}$pp_details.remove();$pp_title=$pp_pic_holder.find(".ppt");$pp_title.width(C);titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom"));$pp_title=$pp_title.clone().appendTo(d("body")).css({position:"absolute",top:-10000});titleHeight+=$pp_title.height();$pp_title.remove();r=B+detailsHeight;t=C;w=r+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();x=C}function z(B){if(B.match(/youtube\.com\/watch/i)){return"youtube"}else{if(B.match(/vimeo\.com/i)){return"vimeo"}else{if(B.match(/\b.mov\b/i)){return"quicktime"}else{if(B.match(/\b.swf\b/i)){return"flash"}else{if(B.match(/\biframe=true\b/i)){return"iframe"}else{if(B.match(/\bajax=true\b/i)){return"ajax"}else{if(B.match(/\bcustom=true\b/i)){return"custom"}else{if(B.substr(0,1)=="#"){return"inline"}else{return"image"}}}}}}}}}function p(){if(doresize&&typeof $pp_pic_holder!="undefined"){scroll_pos=y();contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(h/2)+scroll_pos.scrollTop-(contentHeight/2);if(projectedTop<0){projectedTop=0}if(contentHeight>h){return}$pp_pic_holder.css({top:projectedTop,left:(A/2)+scroll_pos.scrollLeft-(contentwidth/2)})}}function y(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}}else{if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}}else{if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}}}}function v(){h=d(window).height(),A=d(window).width();if(typeof $pp_overlay!="undefined"){$pp_overlay.height(d(document).height()).width(A)}}function e(){if(isSet&&settings.overlay_gallery&&z(pp_images[set_position])=="image"&&(settings.ie6_fallback&&!(d.browser.msie&&parseInt(d.browser.version)==6))){itemWidth=52+5;navWidth=(settings.theme=="facebook"||settings.theme=="pp_default")?50:30;itemsPerPage=Math.floor((s.containerWidth-100-navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()}else{$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show()}galleryWidth=itemsPerPage*itemWidth;fullGalleryWidth=pp_images.length*itemWidth;$pp_gallery.css("margin-left",-((galleryWidth/2)+(navWidth/2))).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected");goToPage=(Math.floor(set_position/itemsPerPage)<totalPage)?Math.floor(set_position/itemsPerPage):totalPage;d.prettyPhoto.changeGalleryPage(goToPage);$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")}else{$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}}function g(B){settings.markup=settings.markup.replace("{pp_social}",(settings.social_tools)?settings.social_tools:"");d("body").append(settings.markup);$pp_pic_holder=d(".pp_pic_holder"),$ppt=d(".ppt"),$pp_overlay=d("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var C=0;C<pp_images.length;C++){if(!pp_images[C].match(/\b(jpg|jpeg|png|gif)\b/gi)){classname="default";img_src=""}else{classname="";img_src=pp_images[C]}toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>"}toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);$pp_gallery=d(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li");$pp_gallery.find(".pp_arrow_next").click(function(){d.prettyPhoto.changeGalleryPage("next");d.prettyPhoto.stopSlideshow();return false});$pp_gallery.find(".pp_arrow_previous").click(function(){d.prettyPhoto.changeGalleryPage("previous");d.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});itemWidth=52+5;$pp_gallery_li.each(function(D){d(this).find("a").click(function(){d.prettyPhoto.changePage(D);d.prettyPhoto.stopSlideshow();return false})})}if(settings.slideshow){$pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>');$pp_pic_holder.find(".pp_nav .pp_play").click(function(){d.prettyPhoto.startSlideshow();return false})}$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme);$pp_overlay.css({opacity:0,height:d(document).height(),width:d(window).width()}).bind("click",function(){if(!settings.modal){d.prettyPhoto.close()}});d("a.pp_close").bind("click",function(){d.prettyPhoto.close();return false});d("a.pp_expand").bind("click",function(D){if(d(this).hasClass("pp_expand")){d(this).removeClass("pp_expand").addClass("pp_contract");doresize=false}else{d(this).removeClass("pp_contract").addClass("pp_expand");doresize=true}n(function(){d.prettyPhoto.open()});return false});$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){d.prettyPhoto.changePage("previous");d.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){d.prettyPhoto.changePage("next");d.prettyPhoto.stopSlideshow();return false});p()}if(!pp_alreadyInitialized&&c()){pp_alreadyInitialized=true;hashIndex=c();hashRel=hashIndex;hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1);hashRel=hashRel.substring(0,hashRel.indexOf("/"));setTimeout(function(){d("a[rel^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)}return this.unbind("click.prettyphoto").bind("click.prettyphoto",d.prettyPhoto.initialize)};function c(){url=location.href;hashtag=(url.indexOf("#!")!=-1)?decodeURI(url.substring(url.indexOf("#!")+2,url.length)):false;return hashtag}function b(){if(typeof theRel=="undefined"){return}location.hash="!"+theRel+"/"+rel_index+"/"}function a(g,f){g=g.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+g+"=([^&#]*)";var i=new RegExp(e);var h=i.exec(f);return(h==null)?"":h[1]}})(jQuery);var pp_alreadyInitialized=false;
/*!
 * jQuery.ScrollTo
 * Copyright (c) 2007-2014 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @projectDescription Easy element scrolling using jQuery.
 * @author Ariel Flesler
 * @version 1.4.12
 */
;(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(c){var a=c.scrollTo=function(f,e,d){return c(window).scrollTo(f,e,d)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1,limit:true};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var e=this,d=!e.nodeName||c.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!d){return e}var f=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||f.compatMode=="BackCompat"?f.body:f.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(f=="max"){f=9000000000}d=c.extend({},a.defaults,d);e=e||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){if(f==null){return}var l=this,j=c(l),k=f,i,g={},m=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}k=m?c(k):c(k,this);if(!k.length){return}case"object":if(k.is||k.style){i=(k=c(k)).offset()}}var n=c.isFunction(d.offset)&&d.offset(l,k)||d.offset;c.each(d.axis.split(""),function(r,s){var t=s=="x"?"Left":"Top",v=t.toLowerCase(),q="scroll"+t,p=l[q],o=a.max(l,s);if(i){g[q]=i[v]+(m?0:p-j.offset()[v]);if(d.margin){g[q]-=parseInt(k.css("margin"+t))||0;g[q]-=parseInt(k.css("border"+t+"Width"))||0}g[q]+=n[v]||0;if(d.over[v]){g[q]+=k[s=="x"?"width":"height"]()*d.over[v]}}else{var u=k[v];g[q]=u.slice&&u.slice(-1)=="%"?parseFloat(u)/100*o:u}if(d.limit&&/^\d+$/.test(g[q])){g[q]=g[q]<=0?0:Math.min(g[q],o)}if(!r&&d.queue){if(p!=g[q]){h(d.onAfterFirst)}delete g[q]}});h(d.onAfter);function h(o){j.animate(g,e,d.easing,o&&function(){o.call(this,k,d)})}}).end()};a.max=function(j,i){var h=i=="x"?"Width":"Height",e="scroll"+h;if(!c(j).is("html,body")){return j[e]-c(j)[h.toLowerCase()]()}var g="client"+h,f=j.ownerDocument.documentElement,d=j.ownerDocument.body;return Math.max(f[e],d[e])-Math.min(f[g],d[g])};function b(d){return c.isFunction(d)||typeof d=="object"?d:{top:d,left:d}}return a}));
/*!
jQuery Url Plugin
	* Version 1.0
	* 2009-03-22 19:30:05
	* URL: http://ajaxcssblog.com/jquery/url-read-get-variables/
	* Description: jQuery Url Plugin gives the ability to read GET parameters from the actual URL
	* Author: Matthias Jäggli
	* Copyright: Copyright (c) 2009 Matthias Jäggli 
	* Licence: dual, MIT/GPLv2
*/
(function(a){a.url={};a.extend(a.url,{_params:{},init:function(){var b="";try{b=(document.location.href.split("?",2)[1]||"").split("#")[0].split("&")||[];for(var c=0;c<b.length;c++){var f=b[c].split("=");if(f[0]){this._params[f[0]]=unescape(f[1])}}}catch(d){alert(d)}},param:function(b){return this._params[b]||""},paramAll:function(){return this._params}});a.url.init()})(jQuery);
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 *  // Modifying file to force compilation
 */
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){if(b&&b.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.validateDelegate(":submit","click",function(d){if(c.settings.submitHandler){c.submitButton=d.target}if(a(d.target).hasClass("cancel")){c.cancelSubmit=true}if(a(d.target).attr("formnovalidate")!==undefined){c.cancelSubmit=true}});this.submit(function(d){if(c.settings.debug){d.preventDefault()}function e(){var f;if(c.settings.submitHandler){if(c.submitButton){f=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm,d);if(c.submitButton){f.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return e()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return e()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c=c&&b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var i=d.rules;var j=a.validator.staticRules(g);switch(e){case"add":a.extend(j,a.validator.normalizeRule(b));delete j.messages;i[g.name]=j;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete i[g.name];return j}var h={};a.each(b.split(/\s/),function(k,l){h[l]=j[l];delete j[l]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.classRules(g),a.validator.attributeRules(g),a.validator.dataRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+a(b).val())},filled:function(b){return !!a.trim(""+a(b).val())},unchecked:function(b){return !a(b).prop("checked")}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length===1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!==Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!==Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),function(){return e})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(c.which===9&&this.elementValue(b)===""){return}else{if(b.name in this.submitted||b===this.lastElement){this.element(b)}}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){if(typeof f==="string"){f=f.split(/\s/)}a.each(f,function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");if(f.settings[e]){f.settings[e].call(f,this[0],g)}}a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c)!==false;if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name===b.name}).length===1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&c.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();if(c==="radio"||c==="checkbox"){return a("input[name='"+a(b).attr("name")+"']:checked").val()}if(typeof d==="string"){return d.replace(/\r/g,"")}return d},check:function(c){c=this.validationTargetFor(this.clean(c));var i=a(c).rules();var d=false;var h=this.elementValue(c);var b;for(var j in i){var g={method:j,parameters:i[j]};try{b=a.validator.methods[j].call(this,h,c,g.parameters);if(b==="dependency-mismatch"){d=true;continue}d=false;if(b==="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+c.id+", check the '"+g.method+"' method.",f)}throw f}}if(d){return}if(this.objectLength(i)){this.successList.push(c)}return true},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||(b.attributes&&a(b).attr("data-msg-"+c.toLowerCase()))},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor===String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d==="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=a.validator.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){var c,d;for(c=0;this.errorList[c];c++){var b=this.errorList[c];if(this.settings.highlight){this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.html(d)}else{b=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){if(this.settings.errorPlacement){this.settings.errorPlacement(b,a(c))}else{b.insertAfter(c)}}}if(!d&&this.settings.success){b.text("");if(typeof this.settings.success==="string"){b.addClass(this.settings.success)}else{this.settings.success(b,c)}}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")===b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return(/radio|checkbox/i).test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest===0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest===0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){if(b.constructor===String){this.classRuleSettings[b]=c}else{a.extend(this.classRuleSettings,b)}},classRules:function(c){var d={};var b=a(c).attr("class");if(b){a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}})}return d},attributeRules:function(c){var f={};var b=a(c);var d=b[0].getAttribute("type");for(var g in a.validator.methods){var e;if(g==="required"){e=b.get(0).getAttribute(g);if(e===""){e=true}e=!!e}else{e=b.attr(g)}if(/min|max/.test(g)&&(d===null||/number|range|text/.test(d))){e=Number(e)}if(e){f[g]=e}else{if(d===g&&d!=="range"){f[g]=true}}}if(f.maxlength&&/-1|2147483647|524288/.test(f.maxlength)){delete f.maxlength}return f},dataRules:function(c){var f,d,e={},b=a(c);for(f in a.validator.methods){d=b.data("rule-"+f.toLowerCase());if(d!==undefined){e[f]=d}}return e},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){var d;if(c[this]){if(a.isArray(c[this])){c[this]=[Number(c[this][0]),Number(c[this][1])]}else{if(typeof c[this]==="string"){d=c[this].split(/[\s,]+/);c[this]=[Number(d[0]),Number(d[1])]}}}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}return c},normalizeRule:function(c){if(typeof c==="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!==undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}if(b.nodeName.toLowerCase()==="select"){var d=a(b).val();return d&&d.length>0}if(this.checkable(b)){return this.getLength(c,b)>0}return a.trim(c).length>0},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,}$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c).toString())},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(f)){return false}var g=0,e=0,b=false;f=f.replace(/\D/g,"");for(var h=f.length-1;h>=0;h--){var d=f.charAt(h);e=parseInt(d,10);if(b){if((e*=2)>9){e-=9}}g+=e;b=!b}return(g%10)===0},minlength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c>=e},maxlength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c<=e},rangelength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},equalTo:function(c,b,e){var d=a(e);if(this.settings.onfocusout){d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()})}return c===d.val()},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g==="string"&&{url:g}||g;if(d.old===f){return d.valid}d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(i){b.settings.messages[c.name].remote=d.originalMessage;var k=i===true||i==="true";if(k){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);delete b.invalid[c.name];b.showErrors()}else{var l={};var j=i||b.defaultMessage(c,"remote");l[c.name]=d.message=a.isFunction(j)?j(f):j;b.invalid[c.name]=true;b.showErrors(l)}d.valid=k;b.stopRequest(c,k)}},g));return"pending"}}});a.format=a.validator.format}(jQuery));(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,g){var d=f.port;if(f.mode==="abort"){if(a[d]){a[d].abort()}a[d]=g}})}else{var b=c.ajax;c.ajax=function(e){var f=("mode" in e?e:c.ajaxSettings).mode,d=("port" in e?e:c.ajaxSettings).port;if(f==="abort"){if(a[d]){a[d].abort()}a[d]=b.apply(this,arguments);return a[d]}return b.apply(this,arguments)}}}(jQuery));(function(a){a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})}(jQuery));
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 *  // Modifying file to force compilation
 */
(function(){function a(b){return b.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'"_+=\/\-]*/g,"")}jQuery.validator.addMethod("maxWords",function(c,b,d){return this.optional(b)||a(c).match(/\b\w+\b/g).length<=d},jQuery.validator.format("Please enter {0} words or less."));jQuery.validator.addMethod("minWords",function(c,b,d){return this.optional(b)||a(c).match(/\b\w+\b/g).length>=d},jQuery.validator.format("Please enter at least {0} words."));jQuery.validator.addMethod("rangeWords",function(e,b,f){var d=a(e);var c=/\b\w+\b/g;return this.optional(b)||d.match(c).length>=f[0]&&d.match(c).length<=f[1]},jQuery.validator.format("Please enter between {0} and {1} words."))}());jQuery.validator.addMethod("letterswithbasicpunc",function(b,a){return this.optional(a)||/^[a-z\-.,()'"\s]+$/i.test(b)},"Letters or punctuation only please");jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^\w+$/i.test(b)},"Letters, numbers, and underscores only please");jQuery.validator.addMethod("lettersonly",function(b,a){return this.optional(a)||/^[a-z]+$/i.test(b)},"Letters only please");jQuery.validator.addMethod("nowhitespace",function(b,a){return this.optional(a)||/^\S+$/i.test(b)},"No white space please");jQuery.validator.addMethod("ziprange",function(b,a){return this.optional(a)||/^90[2-5]\d\{2\}-\d{4}$/.test(b)},"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx");jQuery.validator.addMethod("zipcodeUS",function(b,a){return this.optional(a)||/\d{5}-\d{4}$|^\d{5}$/.test(b)},"The specified US ZIP Code is invalid");jQuery.validator.addMethod("integer",function(b,a){return this.optional(a)||/^-?\d+$/.test(b)},"A positive or negative non-decimal number please");jQuery.validator.addMethod("vinUS",function(o){if(o.length!==17){return false}var h,a,l,j,b,k;var c=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"];var m=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9];var g=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2];var e=0;for(h=0;h<17;h++){j=g[h];l=o.slice(h,h+1);if(h===8){k=l}if(!isNaN(l)){l*=j}else{for(a=0;a<c.length;a++){if(l.toUpperCase()===c[a]){l=m[a];l*=j;if(isNaN(k)&&a===8){k=c[a]}break}}}e+=l}b=e%11;if(b===10){b="X"}if(b===k){return true}return false},"The specified vehicle identification number (VIN) is invalid.");jQuery.validator.addMethod("dateITA",function(e,c){var a=false;var g=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(g.test(e)){var i=e.split("/");var d=parseInt(i[0],10);var b=parseInt(i[1],10);var f=parseInt(i[2],10);var h=new Date(f,b-1,d);if((h.getFullYear()===f)&&(h.getMonth()===b-1)&&(h.getDate()===d)){a=true}else{a=false}}else{a=false}return this.optional(c)||a},"Please enter a correct date");jQuery.validator.addMethod("iban",function(q,j){if(this.optional(j)){return true}if(!(/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(q))){return false}var g=q.replace(/ /g,"").toUpperCase();var c=g.substring(0,2);var a={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"};var m=a[c];if(typeof m!=="undefined"){var k=new RegExp("^[A-Z]{2}\\d{2}"+m+"$","");if(!(k.test(g))){return false}}var e=g.substring(4,g.length)+g.substring(0,4);var f="";var l=true;var d;for(var h=0;h<e.length;h++){d=e.charAt(h);if(d!=="0"){l=false}if(!l){f+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(d)}}var r="";var o="";for(var b=0;b<f.length;b++){var n=f.charAt(b);o=""+r+""+n;r=o%97}return r===1},"Please specify a valid IBAN");jQuery.validator.addMethod("dateNL",function(b,a){return this.optional(a)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(b)},"Please enter a correct date");jQuery.validator.addMethod("phoneNL",function(b,a){return this.optional(a)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(b)},"Please specify a valid phone number.");jQuery.validator.addMethod("mobileNL",function(b,a){return this.optional(a)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(b)},"Please specify a valid mobile number");jQuery.validator.addMethod("postalcodeNL",function(b,a){return this.optional(a)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(b)},"Please specify a valid postal code");jQuery.validator.addMethod("bankaccountNL",function(f,c){if(this.optional(c)){return true}if(!(/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(f))){return false}var e=f.replace(/ /g,"");var d=0;var a=e.length;for(var h=0;h<a;h++){var b=a-h;var g=e.substring(h,h+1);d=d+b*g}return d%11===0},"Please specify a valid bank account number");jQuery.validator.addMethod("giroaccountNL",function(b,a){return this.optional(a)||/^[0-9]{1,7}$/.test(b)},"Please specify a valid giro account number");jQuery.validator.addMethod("bankorgiroaccountNL",function(b,a){return this.optional(a)||($.validator.methods.bankaccountNL.call(this,b,a))||($.validator.methods.giroaccountNL.call(this,b,a))},"Please specify a valid bank or giro account number");jQuery.validator.addMethod("time",function(b,a){return this.optional(a)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(b)},"Please enter a valid time, between 00:00 and 23:59");jQuery.validator.addMethod("time12h",function(b,a){return this.optional(a)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(b)},"Please enter a valid time in 12-hour am/pm format");jQuery.validator.addMethod("phoneUS",function(a,b){a=a.replace(/\s+/g,"");return this.optional(b)||a.length>9&&a.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number");jQuery.validator.addMethod("phoneUK",function(a,b){a=a.replace(/\(|\)|\s+|-/g,"");return this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number");jQuery.validator.addMethod("mobileUK",function(a,b){a=a.replace(/\(|\)|\s+|-/g,"");return this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[45789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number");jQuery.validator.addMethod("phonesUK",function(a,b){a=a.replace(/\(|\)|\s+|-/g,"");return this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[45789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number");jQuery.validator.addMethod("postcodeUK",function(b,a){return this.optional(a)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(b)},"Please specify a valid UK postcode");jQuery.validator.addMethod("strippedminlength",function(b,a,c){return jQuery(b).text().length>=c},jQuery.validator.format("Please enter at least {0} characters"));jQuery.validator.addMethod("email2",function(b,a,c){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(b)},jQuery.validator.messages.email);jQuery.validator.addMethod("url2",function(b,a,c){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},jQuery.validator.messages.url);jQuery.validator.addMethod("creditcardtypes",function(b,a,c){if(/[^0-9\-]+/.test(b)){return false}b=b.replace(/\D/g,"");var d=0;if(c.mastercard){d|=1}if(c.visa){d|=2}if(c.amex){d|=4}if(c.dinersclub){d|=8}if(c.enroute){d|=16}if(c.discover){d|=32}if(c.jcb){d|=64}if(c.unknown){d|=128}if(c.all){d=1|2|4|8|16|32|64|128}if(d&1&&/^(5[12345])/.test(b)){return b.length===16}if(d&2&&/^(4)/.test(b)){return b.length===16}if(d&4&&/^(3[47])/.test(b)){return b.length===15}if(d&8&&/^(3(0[012345]|[68]))/.test(b)){return b.length===14}if(d&16&&/^(2(014|149))/.test(b)){return b.length===15}if(d&32&&/^(6011)/.test(b)){return b.length===16}if(d&64&&/^(3)/.test(b)){return b.length===16}if(d&64&&/^(2131|1800)/.test(b)){return b.length===15}if(d&128){return true}return false},"Please enter a valid credit card number.");jQuery.validator.addMethod("ipv4",function(b,a,c){return this.optional(a)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(b)},"Please enter a valid IP v4 address.");jQuery.validator.addMethod("ipv6",function(b,a,c){return this.optional(a)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(b)},"Please enter a valid IP v6 address.");jQuery.validator.addMethod("pattern",function(b,a,c){if(this.optional(a)){return true}if(typeof c==="string"){c=new RegExp("^(?:"+c+")$")}return c.test(b)},"Invalid format.");jQuery.validator.addMethod("require_from_group",function(g,f,d){var e=this;var b=d[1];var c=$(b,f.form).filter(function(){return e.elementValue(this)}).length>=d[0];if(!$(f).data("being_validated")){var a=$(b,f.form);a.data("being_validated",true);a.valid();a.data("being_validated",false)}return c},jQuery.format("Please fill at least {0} of these fields."));jQuery.validator.addMethod("skip_or_fill_minimum",function(h,e,i){var b=this,c=i[0],d=i[1];var g=$(d,e.form).filter(function(){return b.elementValue(this)}).length;var a=g>=c||g===0;if(!$(e).data("being_validated")){var f=$(d,e.form);f.data("being_validated",true);f.valid();f.data("being_validated",false)}return a},jQuery.format("Please either skip these fields or fill at least {0} of them."));jQuery.validator.addMethod("accept",function(e,c,g){var f=typeof g==="string"?g.replace(/\s/g,"").replace(/,/g,"|"):"image/*",d=this.optional(c),b,a;if(d){return d}if($(c).attr("type")==="file"){f=f.replace(/\*/g,".*");if(c.files&&c.files.length){for(b=0;b<c.files.length;b++){a=c.files[b];if(!a.type.match(new RegExp(".?("+f+")$","i"))){return false}}}}return true},jQuery.format("Please enter a value with a valid mimetype."));jQuery.validator.addMethod("extension",function(b,a,c){c=typeof c==="string"?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(a)||b.match(new RegExp(".("+c+")$","i"))},jQuery.format("Please enter a value with a valid extension."));
/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.3 - 2014-06-06
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2014 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(b){if(b.support.cors||!b.ajaxTransport||!window.XDomainRequest){return}var c=/^https?:\/\//i;var d=/^get|post$/i;var a=new RegExp("^"+location.protocol,"i");b.ajaxTransport("* text html xml json",function(f,h,g){if(!f.crossDomain||!f.async||!d.test(f.type)||!c.test(f.url)||!a.test(f.url)){return}var e=null;return{send:function(l,j){var i="";var k=(h.dataType||"").toLowerCase();e=new XDomainRequest();if(/^\d+$/.test(h.timeout)){e.timeout=h.timeout}e.ontimeout=function(){j(500,"timeout")};e.onload=function(){var r="Content-Length: "+e.responseText.length+"\r\nContent-Type: "+e.contentType;var m={code:200,message:"success"};var o={text:e.responseText};try{if(k==="html"||/text\/html/i.test(e.contentType)){o.html=e.responseText}else{if(k==="json"||(k!=="text"&&/\/json/i.test(e.contentType))){try{o.json=b.parseJSON(e.responseText)}catch(q){m.code=500;m.message="parseerror"}}else{if(k==="xml"||(k!=="text"&&/\/xml/i.test(e.contentType))){var p=new ActiveXObject("Microsoft.XMLDOM");p.async=false;try{p.loadXML(e.responseText)}catch(q){p=undefined}if(!p||!p.documentElement||p.getElementsByTagName("parsererror").length){m.code=500;m.message="parseerror";throw"Invalid XML: "+e.responseText}o.xml=p}}}}catch(n){throw n}finally{j(m.code,m.message,o,r)}};e.onprogress=function(){};e.onerror=function(){j(500,"error",{text:e.responseText})};if(h.data){i=(b.type(h.data)==="string")?h.data:b.param(h.data)}e.open(f.type,f.url);e.send(i)},abort:function(){if(e){e.abort()}}}})}));
/*!
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 */
(function(a,b){if(typeof exports=="object"){module.exports=b()}else{if(typeof define=="function"&&define.amd){define(b)}else{a.Spinner=b()}}}(this,function(){var e=["webkit","Moz","ms","O"],p={},o;function g(q,t){var r=document.createElement(q||"div"),s;for(s in t){r[s]=t[s]}return r}function h(r){for(var q=1,s=arguments.length;q<s;q++){r.appendChild(arguments[q])}return r}var i=(function(){var q=g("style",{type:"text/css"});h(document.getElementsByTagName("head")[0],q);return q.sheet||q.styleSheet}());function c(u,q,v,y){var r=["opacity",q,~~(u*100),v,y].join("-"),s=0.01+v/y*100,x=Math.max(1-(1-u)/q*(100-s),u),w=o.substring(0,o.indexOf("Animation")).toLowerCase(),t=w&&"-"+w+"-"||"";if(!p[r]){i.insertRule("@"+t+"keyframes "+r+"{0%{opacity:"+x+"}"+s+"%{opacity:"+u+"}"+(s+0.01)+"%{opacity:1}"+(s+q)%100+"%{opacity:"+u+"}100%{opacity:"+x+"}}",i.cssRules.length);p[r]=1}return r}function m(u,v){var t=u.style,q,r;v=v.charAt(0).toUpperCase()+v.slice(1);for(r=0;r<e.length;r++){q=e[r]+v;if(t[q]!==undefined){return q}}if(t[v]!==undefined){return v}}function f(q,s){for(var r in s){q.style[m(q,r)||r]=s[r]}return q}function k(s){for(var q=1;q<arguments.length;q++){var r=arguments[q];for(var t in r){if(s[t]===undefined){s[t]=r[t]}}}return s}function j(q){var r={x:q.offsetLeft,y:q.offsetTop};while((q=q.offsetParent)){r.x+=q.offsetLeft,r.y+=q.offsetTop}return r}function n(r,q){return typeof r=="string"?r:r[q%r.length]}var d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",position:"absolute"};function b(q){this.opts=k(q||{},b.defaults,d)}b.defaults={};k(b.prototype,{spin:function(z){this.stop();var C=this,r=C.opts,s=C.el=f(g(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),B=r.radius+r.length+r.width;f(s,{left:r.left,top:r.top});if(z){z.insertBefore(s,z.firstChild||null)}s.setAttribute("role","progressbar");C.lines(s,C.opts);if(!o){var w=0,q=(r.lines-1)*(1-r.direction)/2,v,t=r.fps,y=t/r.speed,x=(1-r.opacity)/(y*r.trail/100),A=y/r.lines;(function u(){w++;for(var D=0;D<r.lines;D++){v=Math.max(1-(w+(r.lines-D)*A)%y*x,r.opacity);C.opacity(s,D*r.direction+q,v,r)}C.timeout=C.el&&setTimeout(u,~~(1000/t))})()}return C},stop:function(){var q=this.el;if(q){clearTimeout(this.timeout);if(q.parentNode){q.parentNode.removeChild(q)}this.el=undefined}return this},lines:function(s,u){var r=0,v=(u.lines-1)*(1-u.direction)/2,q;function t(w,x){return f(g(),{position:"absolute",width:(u.length+u.width)+"px",height:u.width+"px",background:w,boxShadow:x,transformOrigin:"left",transform:"rotate("+~~(360/u.lines*r+u.rotate)+"deg) translate("+u.radius+"px,0)",borderRadius:(u.corners*u.width>>1)+"px"})}for(;r<u.lines;r++){q=f(g(),{position:"absolute",top:1+~(u.width/2)+"px",transform:u.hwaccel?"translate3d(0,0,0)":"",opacity:u.opacity,animation:o&&c(u.opacity,u.trail,v+r*u.direction,u.lines)+" "+1/u.speed+"s linear infinite"});if(u.shadow){h(q,f(t("#000","0 0 4px #000"),{top:2+"px"}))}h(s,h(q,t(n(u.color,r),"0 0 1px rgba(0,0,0,.1)")))}return s},opacity:function(r,q,s){if(q<r.childNodes.length){r.childNodes[q].style.opacity=s}}});function l(){function q(s,r){return g("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',r)}i.addRule(".spin-vml","behavior:url(#default#VML)");b.prototype.lines=function(v,u){var t=u.length+u.width,B=2*t;function A(){return f(q("group",{coordsize:B+" "+B,coordorigin:-t+" "+-t}),{width:B,height:B})}var w=-(u.width+u.length)*2+"px",z=f(A(),{position:"absolute",top:w,left:w}),y;function x(s,r,C){h(z,h(f(A(),{rotation:360/u.lines*s+"deg",left:~~r}),h(f(q("roundrect",{arcsize:u.corners}),{width:t,height:u.width,left:u.radius,top:-u.width>>1,filter:C}),q("fill",{color:n(u.color,s),opacity:u.opacity}),q("stroke",{opacity:0}))))}if(u.shadow){for(y=1;y<=u.lines;y++){x(y,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(y=1;y<=u.lines;y++){x(y)}return h(v,z)};b.prototype.opacity=function(s,r,u,t){var v=s.firstChild;t=t.shadow&&t.lines||0;if(v&&r+t<v.childNodes.length){v=v.childNodes[r+t];v=v&&v.firstChild;v=v&&v.firstChild;if(v){v.opacity=u}}}}var a=f(g("group"),{behavior:"url(#default#VML)"});if(!m(a,"transform")&&a.adj){l()}else{o=m(a,"animation")}return b}));
/*!
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,h,c){var a=$([]),e=$.resize=$.extend($.resize,{}),i,k="setTimeout",j="resize",d=j+"-special-event",b="delay",f="throttleWindow";e[b]=250;e[f]=true;$.event.special[j]={setup:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.add(l);$.data(this,d,{w:l.width(),h:l.height()});if(a.length===1){g()}},teardown:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.not(l);l.removeData(d);if(!a.length){clearTimeout(i)}},add:function(l){if(!e[f]&&this[k]){return false}var n;function m(s,o,p){var q=$(this),r=$.data(this,d);r.w=o!==c?o:q.width();r.h=p!==c?p:q.height();n.apply(this,arguments)}if($.isFunction(l)){n=l;return m}else{n=l.handler;l.handler=m}}};function g(){i=h[k](function(){a.each(function(){var n=$(this),m=n.width(),l=n.height(),o=$.data(this,d);if(m!==o.w||l!==o.h){n.trigger(j,[o.w=m,o.h=l])}});g()},e[b])}})(jQuery,this);
/*!
 * jQuery capslockstate plugin v1.2.1
 * https://github.com/nosilleg/capslockstate-jquery-plugin/
 *
 * Copyright 2012 Jason Ellison
 * Released under the MIT license
 * https://github.com/nosilleg/capslockstate-jquery-plugin/blob/master/MIT-LICENSE.txt
 *
 * Date: Sun Feb 3 2013 21:34:00 GMT
 *
 *  // Modifying file to force compilation
 */
(function(b){var c="unknown";var a={init:function(e){var f=b.extend({},e);var h=/MacPPC|MacIntel/.test(window.navigator.platform)===true;var g={isCapslockOn:function(j){var k=false;if(j.shiftKey){k=j.shiftKey}else{if(j.modifiers){k=!!(j.modifiers&4)}}var i=String.fromCharCode(j.which);if(i.toUpperCase()===i.toLowerCase()){}else{if(i.toUpperCase()===i){if(h===true&&k){}else{c=!k}}else{if(i.toLowerCase()===i){c=k}}}return c},isCapslockKey:function(i){var j=i.which;if(j===20){if(c!=="unknown"){c=!c}}return c},hasStateChange:function(i,j){if(i!==j){b("body").trigger("capsChanged");if(j===true){b("body").trigger("capsOn")}else{if(j===false){b("body").trigger("capsOff")}else{if(j==="unknown"){b("body").trigger("capsUnknown")}}}}}};b("body").bind("keypress.capslockstate",function(j){var i=c;c=g.isCapslockOn(j);g.hasStateChange(i,c)});var d="keydown.capslockstate";if(/MacPPC|MacIntel/.test(window.navigator.platform)===true){d="keyup.capslockstate "+d}b("body").bind(d,function(j){var i=c;c=g.isCapslockKey(j);g.hasStateChange(i,c)});b(window).bind("focus.capslockstate",function(){var i=c;c="unknown";g.hasStateChange(i,c)});g.hasStateChange(null,"unknown");return this.each(function(){})},state:function(){return c},destroy:function(){return this.each(function(){b("body").unbind(".capslockstate");b(window).unbind(".capslockstate")})}};jQuery.fn.capslockstate=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{b.error("Method "+d+" does not exist on jQuery.capslockstate")}}}})(jQuery);
/*!
 * jQuery Raty - A Star Rating Plugin
 *
 * The MIT License
 *
 * @author  : Washington Botelho
 * @doc     : http://wbotelhos.com/raty
 * @version : 2.7.0
 *
 */
;(function(b){var a={init:function(c){return this.each(function(){this.self=b(this);a.destroy.call(this.self);this.opt=b.extend(true,{},b.fn.raty.defaults,c);a._adjustCallback.call(this);a._adjustNumber.call(this);a._adjustHints.call(this);this.opt.score=a._adjustedScore.call(this,this.opt.score);if(this.opt.starType!=="img"){a._adjustStarType.call(this)}a._adjustPath.call(this);a._createStars.call(this);if(this.opt.cancel){a._createCancel.call(this)}if(this.opt.precision){a._adjustPrecision.call(this)}a._createScore.call(this);a._apply.call(this,this.opt.score);a._setTitle.call(this,this.opt.score);a._target.call(this,this.opt.score);if(this.opt.readOnly){a._lock.call(this)}else{this.style.cursor="pointer";a._binds.call(this)}})},_adjustCallback:function(){var c=["number","readOnly","score","scoreName","target"];for(var d=0;d<c.length;d++){if(typeof this.opt[c[d]]==="function"){this.opt[c[d]]=this.opt[c[d]].call(this)}}},_adjustedScore:function(c){if(!c){return c}return a._between(c,0,this.opt.number)},_adjustHints:function(){if(!this.opt.hints){this.opt.hints=[]}if(!this.opt.halfShow&&!this.opt.half){return}var c=this.opt.precision?10:2;for(var e=0;e<this.opt.number;e++){var g=this.opt.hints[e];if(Object.prototype.toString.call(g)!=="[object Array]"){g=[g]}this.opt.hints[e]=[];for(var d=0;d<c;d++){var h=g[d],f=g[g.length-1];if(f===undefined){f=null}this.opt.hints[e][d]=h===undefined?f:h}}},_adjustNumber:function(){this.opt.number=a._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"";if(this.opt.path&&this.opt.path.charAt(this.opt.path.length-1)!=="/"){this.opt.path+="/"}},_adjustPrecision:function(){this.opt.half=true},_adjustStarType:function(){var c=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var d=0;d<c.length;d++){this.opt[c[d]]=this.opt[c[d]].replace(".","-")}},_apply:function(c){a._fill.call(this,c);if(c){if(c>0){this.score.val(c)}a._roundStars.call(this,c)}},_between:function(e,d,c){return Math.min(Math.max(parseFloat(e),d),c)},_binds:function(){if(this.cancel){a._bindOverCancel.call(this);a._bindClickCancel.call(this);a._bindOutCancel.call(this)}a._bindOver.call(this);a._bindClick.call(this);a._bindOut.call(this)},_bindClick:function(){var c=this;c.stars.on("click.raty",function(d){var e=true,f=(c.opt.half||c.opt.precision)?c.self.data("score"):(this.alt||b(this).data("alt"));if(c.opt.click){e=c.opt.click.call(c,+f,d)}if(e||e===undefined){if(c.opt.half&&!c.opt.precision){f=a._roundHalfScore.call(c,f)}a._apply.call(c,f)}})},_bindClickCancel:function(){var c=this;c.cancel.on("click.raty",function(d){c.score.removeAttr("value");if(c.opt.click){c.opt.click.call(c,null,d)}})},_bindOut:function(){var c=this;c.self.on("mouseleave.raty",function(d){var e=+c.score.val()||undefined;a._apply.call(c,e);a._target.call(c,e,d);a._resetTitle.call(c);if(c.opt.mouseout){c.opt.mouseout.call(c,e,d)}})},_bindOutCancel:function(){var c=this;c.cancel.on("mouseleave.raty",function(d){var e=c.opt.cancelOff;if(c.opt.starType!=="img"){e=c.opt.cancelClass+" "+e}a._setIcon.call(c,this,e);if(c.opt.mouseout){var f=+c.score.val()||undefined;c.opt.mouseout.call(c,f,d)}})},_bindOver:function(){var c=this,d=c.opt.half?"mousemove.raty":"mouseover.raty";c.stars.on(d,function(e){var f=a._getScoreByPosition.call(c,e,this);a._fill.call(c,f);if(c.opt.half){a._roundStars.call(c,f,e);a._setTitle.call(c,f,e);c.self.data("score",f)}a._target.call(c,f,e);if(c.opt.mouseover){c.opt.mouseover.call(c,f,e)}})},_bindOverCancel:function(){var c=this;c.cancel.on("mouseover.raty",function(d){var f=c.opt.path+c.opt.starOff,e=c.opt.cancelOn;if(c.opt.starType==="img"){c.stars.attr("src",f)}else{e=c.opt.cancelClass+" "+e;c.stars.attr("class",f)}a._setIcon.call(c,this,e);a._target.call(c,null,d);if(c.opt.mouseover){c.opt.mouseover.call(c,null)}})},_buildScoreField:function(){return b("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var c=this.opt.path+this.opt.cancelOff,d=b("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});if(this.opt.starType==="img"){d.attr({src:c,alt:"x"})}else{d.attr("data-alt","x").addClass(c)}if(this.opt.cancelPlace==="left"){this.self.prepend("&#160;").prepend(d)}else{this.self.append("&#160;").append(d)}this.cancel=d},_createScore:function(){var c=b(this.opt.targetScore);this.score=c.length?c:a._buildScoreField.call(this)},_createStars:function(){for(var e=1;e<=this.opt.number;e++){var d=a._nameForIndex.call(this,e),c={alt:e,src:this.opt.path+this.opt[d]};if(this.opt.starType!=="img"){c={"data-alt":e,"class":c.src}}c.title=a._getHint.call(this,e);b("<"+this.opt.starType+" />",c).appendTo(this);if(this.opt.space){this.self.append(e<this.opt.number?"&#160;":"")}}this.stars=this.self.children(this.opt.starType)},_error:function(c){b(this).text(c);b.error(c)},_fill:function(j){var g=0;for(var c=1;c<=this.stars.length;c++){var d,f=this.stars[c-1],e=a._turnOn.call(this,c,j);if(this.opt.iconRange&&this.opt.iconRange.length>g){var h=this.opt.iconRange[g];d=a._getRangeIcon.call(this,h,e);if(c<=h.range){a._setIcon.call(this,f,d)}if(c===h.range){g++}}else{d=this.opt[e?"starOn":"starOff"];a._setIcon.call(this,f,d)}}},_getFirstDecimal:function(e){var d=e.toString().split(".")[1],c=0;if(d){c=parseInt(d.charAt(0),10);if(d.slice(1,5)==="9999"){c++}}return c},_getRangeIcon:function(d,c){return c?d.on||this.opt.starOn:d.off||this.opt.starOff},_getScoreByPosition:function(c,e){var g=parseInt(e.alt||e.getAttribute("data-alt"),10);if(this.opt.half){var d=a._getWidth.call(this),f=parseFloat((c.pageX-b(e).offset().left)/d);g=g-1+f}return g},_getHint:function(h,d){if(h!==0&&!h){return this.opt.noRatedMsg}var c=a._getFirstDecimal.call(this,h),e=Math.ceil(h),f=this.opt.hints[(e||1)-1],g=f,i=!d||this.move;if(this.opt.precision){if(i){c=c===0?9:c-1}g=f[c]}else{if(this.opt.halfShow||this.opt.half){c=i&&c===0?1:c>5?1:0;g=f[c]}}return g===""?"":g||h},_getWidth:function(){var c=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));if(!c){a._error.call(this,"Could not get the icon width!")}return c},_lock:function(){var c=a._getHint.call(this,this.score.val());this.style.cursor="";this.title=c;this.score.prop("readonly",true);this.stars.prop("title",c);if(this.cancel){this.cancel.hide()}this.self.data("readonly",true)},_nameForIndex:function(c){return this.opt.score&&this.opt.score>=c?"starOn":"starOff"},_resetTitle:function(d){for(var c=0;c<this.opt.number;c++){this.stars[c].title=a._getHint.call(this,c+1)}},_roundHalfScore:function(e){var d=parseInt(e,10),c=a._getFirstDecimal.call(this,e);if(c!==0){c=c>5?1:0.5}return d+c},_roundStars:function(h,d){var c=(h%1).toFixed(2),e;if(d||this.move){e=c>0.5?"starOn":"starHalf"}else{if(c>this.opt.round.down){e="starOn";if(this.opt.halfShow&&c<this.opt.round.up){e="starHalf"}else{if(c<this.opt.round.full){e="starOff"}}}}if(e){var f=this.opt[e],g=this.stars[Math.ceil(h)-1];a._setIcon.call(this,g,f)}},_setIcon:function(d,c){d[this.opt.starType==="img"?"src":"className"]=this.opt.path+c},_setTarget:function(c,d){if(d){d=this.opt.targetFormat.toString().replace("{score}",d)}if(c.is(":input")){c.val(d)}else{c.html(d)}},_setTitle:function(f,c){if(f){var d=parseInt(Math.ceil(f),10),e=this.stars[d-1];e.title=a._getHint.call(this,f,c)}},_target:function(g,d){if(this.opt.target){var f=b(this.opt.target);if(!f.length){a._error.call(this,"Target selector invalid or missing!")}var c=d&&d.type==="mouseover";if(g===undefined){g=this.opt.targetText}else{if(g===null){g=c?this.opt.cancelHint:this.opt.targetText}else{if(this.opt.targetType==="hint"){g=a._getHint.call(this,g,d)}else{if(this.opt.precision){g=parseFloat(g).toFixed(1)}}var e=d&&d.type==="mousemove";if(!c&&!e&&!this.opt.targetKeep){g=this.opt.targetText}}}a._setTarget.call(this,f,g)}},_turnOn:function(c,d){return this.opt.single?(c===d):(c<=d)},_unlock:function(){this.style.cursor="pointer";this.removeAttribute("title");this.score.removeAttr("readonly");this.self.data("readonly",false);for(var c=0;c<this.opt.number;c++){this.stars[c].title=a._getHint.call(this,c+1)}if(this.cancel){this.cancel.css("display","")}},cancel:function(c){return this.each(function(){var d=b(this);if(d.data("readonly")!==true){a[c?"click":"score"].call(d,null);this.score.removeAttr("value")}})},click:function(c){return this.each(function(){if(b(this).data("readonly")!==true){c=a._adjustedScore.call(this,c);a._apply.call(this,c);if(this.opt.click){this.opt.click.call(this,c,b.Event("click"))}a._target.call(this,c)}})},destroy:function(){return this.each(function(){var c=b(this),d=c.data("raw");if(d){c.off(".raty").empty().css({cursor:d.style.cursor}).removeData("readonly")}else{c.data("raw",c.clone()[0])}})},getScore:function(){var d=[],c;this.each(function(){c=this.score.val();d.push(c?+c:undefined)});return(d.length>1)?d:d[0]},move:function(c){return this.each(function(){var g=parseInt(c,10),e=a._getFirstDecimal.call(this,c);if(g>=this.opt.number){g=this.opt.number-1;e=10}var h=a._getWidth.call(this),f=h/10,j=b(this.stars[g]),i=j.offset().left+f*e,d=b.Event("mousemove",{pageX:i});this.move=true;j.trigger(d);this.move=false})},readOnly:function(c){return this.each(function(){var d=b(this);if(d.data("readonly")!==c){if(c){d.off(".raty").children("img").off(".raty");a._lock.call(this)}else{a._binds.call(this);a._unlock.call(this)}d.data("readonly",c)}})},reload:function(){return a.set.call(this,{})},score:function(){var c=b(this);return arguments.length?a.setScore.apply(c,arguments):a.getScore.call(c)},set:function(c){return this.each(function(){b(this).raty(b.extend({},this.opt,c))})},setScore:function(c){return this.each(function(){if(b(this).data("readonly")!==true){c=a._adjustedScore.call(this,c);a._apply.call(this,c);a._target.call(this,c)}})}};b.fn.raty=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist!")}}};b.fn.raty.defaults={cancel:false,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:false,halfShow:true,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:undefined,precision:false,readOnly:false,round:{down:0.25,full:0.6,up:0.76},score:undefined,scoreName:"score",single:false,space:true,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:undefined,targetFormat:"{score}",targetKeep:false,targetScore:undefined,targetText:"",targetType:"hint"}})(jQuery);